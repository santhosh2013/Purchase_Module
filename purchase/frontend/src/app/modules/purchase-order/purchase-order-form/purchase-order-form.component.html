<div class="container mt-4">
  <!-- Header -->
  <div class="row mb-4">
    <div class="col-12">
      <h2>
        <i class="bi bi-receipt text-success"></i>
        {{ isViewMode ? 'View Purchase Order' : (isEditMode ? 'Edit Purchase Order' : 'New Purchase Order') }}
      </h2>
      <p class="text-muted">{{ isViewMode ? 'View' : (isEditMode ? 'Update' : 'Create') }} purchase order details</p>
    </div>
  </div>

  <!-- Form -->
  <div class="card shadow-sm">
    <div class="card-body">
      <form #purchaseOrderForm="ngForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <!-- Event ID -->
          <div class="col-md-6 mb-3">
            <label for="eventid" class="form-label">
              Event ID <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <input type="number" class="form-control" id="eventid" name="eventid" 
                   [(ngModel)]="purchaseOrder.eventid" [required]="!isViewMode" min="1" [readonly]="isEditMode || isViewMode">
          </div>

          <!-- Event Name -->
          <div class="col-md-6 mb-3">
            <label for="eventname" class="form-label">
              Event Name <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <input type="text" class="form-control" id="eventname" name="eventname" 
                   [(ngModel)]="purchaseOrder.eventname" [required]="!isViewMode" minlength="2" maxlength="100"
                   placeholder="Enter event name" [readonly]="isEditMode || isViewMode">
          </div>

          <!-- Vendor ID -->
          <div class="col-md-6 mb-3">
            <label for="vendorid" class="form-label">
              Vendor ID <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <input type="number" class="form-control" id="vendorid" name="vendorid" 
                   [(ngModel)]="purchaseOrder.vendorid" [required]="!isViewMode" min="1" [readonly]="isEditMode || isViewMode">
          </div>

          <!-- Vendor Name -->
          <div class="col-md-6 mb-3">
            <label for="vendorname" class="form-label">
              Vendor Name <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <input type="text" class="form-control" id="vendorname" name="vendorname" 
                   [(ngModel)]="purchaseOrder.vendorname" [required]="!isViewMode" minlength="2" maxlength="100"
                   placeholder="Enter vendor name" [readonly]="isEditMode || isViewMode">
          </div>

          <!-- CDSID -->
          <div class="col-md-6 mb-3">
            <label for="cdsid" class="form-label">
              CDSID <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <input type="text" class="form-control" id="cdsid" name="cdsid" 
                   [(ngModel)]="purchaseOrder.cdsid" [required]="!isViewMode" minlength="2" maxlength="50"
                   placeholder="Enter CDSID (e.g., AB12, USER001)" [readonly]="isEditMode || isViewMode">
          </div>

          <!-- Order Date -->
          <div class="col-md-6 mb-3">
            <label for="orderdate" class="form-label">
              Order Date <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <input type="date" class="form-control" id="orderdate" name="orderdate"
                   [(ngModel)]="purchaseOrder.orderdate" [required]="!isViewMode" [readonly]="isViewMode">
          </div>

          <!-- Order Amount INR -->
          <div class="col-md-6 mb-3">
            <label for="orderamountINR" class="form-label">
              Order Amount (₹) <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <input type="number" class="form-control" id="orderamountINR" name="orderamountINR"
                   [(ngModel)]="purchaseOrder.orderamountINR" (ngModelChange)="onINRChange()" 
                   [required]="!isViewMode" min="0" step="0.01" [readonly]="isEditMode || isViewMode">
          </div>

          <!-- Order Amount Dollar -->
          <div class="col-md-6 mb-3">
            <label for="orderamountdollar" class="form-label">
              Order Amount ($) <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <input type="number" class="form-control" id="orderamountdollar" name="orderamountdollar"
                   [(ngModel)]="purchaseOrder.orderamountdollar" (ngModelChange)="onUSDChange()" 
                   [required]="!isViewMode" min="0" step="0.01" [readonly]="isEditMode || isViewMode">
            <small class="text-muted">Exchange Rate: ₹{{ exchangeRate }} = $1</small>
          </div>

          <!-- Purchase Request ID -->
          <div class="col-md-6 mb-3">
            <label for="prid" class="form-label">
              Purchase Request ID
            </label>
            <input type="number" class="form-control" id="prid" name="prid" 
                   [(ngModel)]="purchaseOrder.prid" min="0" [readonly]="isEditMode || isViewMode">
          </div>

          <!-- Negotiation ID -->
          <div class="col-md-6 mb-3">
            <label for="negotiationid" class="form-label">
              Negotiation ID
            </label>
            <input type="number" class="form-control" id="negotiationid" name="negotiationid"
                   [(ngModel)]="purchaseOrder.negotiationid" min="0" [readonly]="isEditMode || isViewMode">
          </div>

          <!-- Status -->
          <div class="col-md-6 mb-3">
            <label for="po_status" class="form-label">
              Status <span class="text-danger" *ngIf="!isViewMode">*</span>
            </label>
            <select class="form-select" id="po_status" name="po_status" 
                    [(ngModel)]="purchaseOrder.po_status" [required]="!isViewMode" [disabled]="isViewMode">
              <option *ngFor="let status of statusOptions" [value]="status">
                {{ status }}
              </option>
            </select>
          </div>

        </div>

        <!-- Buttons -->
        <div class="row mt-3">
          <div class="col-12">
            <!-- Submit Button (Hidden in View Mode) -->
            <button *ngIf="!isViewMode" type="submit" class="btn btn-success btn-lg me-2" [disabled]="!purchaseOrderForm.valid">
              <i class="bi bi-check-circle me-2"></i>
              {{ isEditMode ? 'Update' : 'Create' }}
            </button>
            
            <!-- Back Button -->
            <button type="button" class="btn btn-secondary btn-lg" (click)="goBack()">
              <i class="bi bi-x-circle me-2"></i>
              {{ isViewMode ? 'Close' : 'Cancel' }}
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
